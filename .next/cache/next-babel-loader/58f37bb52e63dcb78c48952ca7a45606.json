{"ast":null,"code":"import rpc from './rpc';\nexport default async function getNotionUsers(ids) {\n  const {\n    results = []\n  } = await rpc('getRecordValues', {\n    requests: ids.map(id => ({\n      id,\n      table: 'notion_user'\n    }))\n  });\n  const users = {};\n\n  for (const result of results) {\n    const {\n      value\n    } = result || {\n      value: {}\n    };\n    const {\n      given_name,\n      family_name\n    } = value;\n    let full_name = given_name || '';\n\n    if (family_name) {\n      full_name = `${full_name} ${family_name}`;\n    }\n\n    users[value.id] = {\n      full_name\n    };\n  }\n\n  return {\n    users\n  };\n}","map":{"version":3,"sources":["/Users/jamesbedford/Documents/GitHub/jamees-site/src/lib/notion/getNotionUsers.ts"],"names":["rpc","getNotionUsers","ids","results","requests","map","id","table","users","result","value","given_name","family_name","full_name"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,OAAhB;AAEA,eAAe,eAAeC,cAAf,CAA8BC,GAA9B,EAA6C;AAC1D,QAAM;AAAEC,IAAAA,OAAO,GAAG;AAAZ,MAAmB,MAAMH,GAAG,CAAC,iBAAD,EAAoB;AACpDI,IAAAA,QAAQ,EAAEF,GAAG,CAACG,GAAJ,CAASC,EAAD,KAAiB;AACjCA,MAAAA,EADiC;AAEjCC,MAAAA,KAAK,EAAE;AAF0B,KAAjB,CAAR;AAD0C,GAApB,CAAlC;AAOA,QAAMC,KAAU,GAAG,EAAnB;;AAEA,OAAK,MAAMC,MAAX,IAAqBN,OAArB,EAA8B;AAC5B,UAAM;AAAEO,MAAAA;AAAF,QAAYD,MAAM,IAAI;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAA5B;AACA,UAAM;AAAEC,MAAAA,UAAF;AAAcC,MAAAA;AAAd,QAA8BF,KAApC;AACA,QAAIG,SAAS,GAAGF,UAAU,IAAI,EAA9B;;AAEA,QAAIC,WAAJ,EAAiB;AACfC,MAAAA,SAAS,GAAI,GAAEA,SAAU,IAAGD,WAAY,EAAxC;AACD;;AACDJ,IAAAA,KAAK,CAACE,KAAK,CAACJ,EAAP,CAAL,GAAkB;AAAEO,MAAAA;AAAF,KAAlB;AACD;;AAED,SAAO;AAAEL,IAAAA;AAAF,GAAP;AACD","sourcesContent":["import rpc from './rpc'\n\nexport default async function getNotionUsers(ids: string[]) {\n  const { results = [] } = await rpc('getRecordValues', {\n    requests: ids.map((id: string) => ({\n      id,\n      table: 'notion_user',\n    })),\n  })\n\n  const users: any = {}\n\n  for (const result of results) {\n    const { value } = result || { value: {} }\n    const { given_name, family_name } = value\n    let full_name = given_name || ''\n\n    if (family_name) {\n      full_name = `${full_name} ${family_name}`\n    }\n    users[value.id] = { full_name }\n  }\n\n  return { users }\n}\n"]},"metadata":{},"sourceType":"module"}