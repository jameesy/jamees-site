{"ast":null,"code":"export function setHeaders(req, res) {\n  // set SPR/CORS headers\n  res.setHeader('Access-Control-Allow-Origin', '*');\n  res.setHeader('Cache-Control', 's-maxage=1, stale-while-revalidate');\n  res.setHeader('Access-Control-Allow-Methods', 'GET');\n  res.setHeader('Access-Control-Allow-Headers', 'pragma');\n\n  if (req.method === 'OPTIONS') {\n    res.status(200);\n    res.end();\n    return true;\n  }\n\n  return false;\n}\nexport async function handleData(res, data) {\n  data = data || {\n    status: 'error',\n    message: 'unhandled request'\n  };\n  res.status(data.status !== 'error' ? 200 : 500);\n  res.json(data);\n}\nexport function handleError(res, error) {\n  console.error(error);\n  res.status(500).json({\n    status: 'error',\n    message: 'an error occurred processing request'\n  });\n}","map":null,"metadata":{},"sourceType":"module"}