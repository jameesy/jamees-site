{"ast":null,"code":"var _jsxFileName = \"/Users/jamesbedford/Documents/GitHub/jamees-site/src/components/content.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport ReactJSXParser from '@zeit/react-jsx-parser';\nimport Heading from './heading';\nimport components from './dynamic';\nimport { textBlock } from '../lib/notion/renderers';\nconst listTypes = new Set(['bulleted_list', 'numbered_list']);\nexport default function Content({\n  blocks\n}) {\n  let listTagName = null;\n  let listLastId = null;\n  let listChildren = [];\n  return __jsx(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 10\n    }\n  }, blocks.map((block, blockIdx) => {\n    const {\n      value\n    } = block;\n    const {\n      type,\n      properties,\n      id\n    } = value;\n    const isLast = blockIdx === blocks.length - 1;\n    const isList = listTypes.has(type);\n    let toRender = [];\n\n    if (isList) {\n      listTagName = components[type === 'bulleted_list' ? 'ul' : 'ol'];\n      listLastId = `list${id}`;\n      listChildren.push(React.createElement(components.li || 'li', {\n        key: id\n      }, textBlock(properties.title, true, id)));\n    }\n\n    if (listTagName && (isLast || !isList)) {\n      toRender.push(React.createElement(listTagName, {\n        key: listLastId\n      }, ...listChildren));\n      listChildren = [];\n      listLastId = null;\n      listTagName = null;\n    }\n\n    const renderHeading = Type => {\n      toRender.push(__jsx(Heading, {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }\n      }, __jsx(Type, {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }\n      }, textBlock(properties.title, true, id))));\n    };\n\n    switch (type) {\n      case 'page':\n      case 'divider':\n        toRender.push(__jsx(\"hr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }\n        }));\n        break;\n\n      case 'text':\n        if (properties) {\n          toRender.push(textBlock(properties.title, false, id));\n        }\n\n        break;\n\n      case 'image':\n      case 'video':\n        {\n          const {\n            format = {},\n            properties: {\n              caption\n            }\n          } = value;\n          const isImage = type === 'image';\n          const Comp = isImage ? 'img' : 'video';\n          toRender.push(__jsx(\"div\", {\n            className: \"media-container\",\n            key: id,\n            style: {\n              paddingBottom: format.block_aspect_ratio * 100 + '%'\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 13\n            }\n          }, __jsx(Comp, {\n            src: `/api/asset?assetUrl=${encodeURIComponent(format.display_source)}&blockId=${id}`,\n            controls: !isImage,\n            alt: caption ? caption.join('') : undefined,\n            loop: !isImage,\n            muted: !isImage,\n            autoPlay: !isImage,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 15\n            }\n          })));\n          break;\n        }\n\n      case 'header':\n        renderHeading('h1');\n        break;\n\n      case 'sub_header':\n        renderHeading('h2');\n        break;\n\n      case 'sub_sub_header':\n        renderHeading('h3');\n        break;\n\n      case 'code':\n        {\n          if (properties.title) {\n            const content = properties.title[0][0];\n            const language = properties.language[0][0];\n\n            if (language === 'LiveScript') {\n              // this requires the DOM for now\n              toRender.push(__jsx(ReactJSXParser, {\n                key: id,\n                jsx: content,\n                components: components,\n                componentsOnly: false,\n                renderInpost: false,\n                allowUnknownElements: true,\n                blacklistedTags: ['script', 'style'],\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 17\n                }\n              }));\n            } else {\n              toRender.push(__jsx(components.Code, {\n                key: id,\n                language: language || '',\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 17\n                }\n              }, content));\n            }\n          }\n\n          break;\n        }\n\n      case 'quote':\n        if (properties.title) {\n          toRender.push(React.createElement(components.blockquote, {\n            key: id\n          }, textBlock(properties.title, false, id)));\n        }\n\n        break;\n\n      default:\n        if (true && !listTypes.has(type)) {\n          console.log('unknown type', type);\n        }\n\n        break;\n    }\n\n    return toRender;\n  }));\n}","map":{"version":3,"sources":["/Users/jamesbedford/Documents/GitHub/jamees-site/src/components/content.tsx"],"names":["React","ReactJSXParser","Heading","components","textBlock","listTypes","Set","Content","blocks","listTagName","listLastId","listChildren","map","block","blockIdx","value","type","properties","id","isLast","length","isList","has","toRender","push","createElement","li","key","title","renderHeading","Type","format","caption","isImage","Comp","paddingBottom","block_aspect_ratio","encodeURIComponent","display_source","join","undefined","content","language","blockquote","console","log"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,cAAP,MAA2B,wBAA3B;AAEA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,UAAP,MAAuB,WAAvB;AAEA,SAASC,SAAT,QAA0B,yBAA1B;AAEA,MAAMC,SAAS,GAAG,IAAIC,GAAJ,CAAQ,CAAC,eAAD,EAAkB,eAAlB,CAAR,CAAlB;AAEA,eAAe,SAASC,OAAT,CAAiB;AAAEC,EAAAA;AAAF,CAAjB,EAA6B;AAC1C,MAAIC,WAA0B,GAAG,IAAjC;AACA,MAAIC,UAAyB,GAAG,IAAhC;AACA,MAAIC,YAAkC,GAAG,EAAzC;AAEA,SAAO;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACJH,MAAM,CAACI,GAAP,CAAW,CAACC,KAAD,EAAQC,QAAR,KAAqB;AAC/B,UAAM;AAAEC,MAAAA;AAAF,QAAYF,KAAlB;AACA,UAAM;AAAEG,MAAAA,IAAF;AAAQC,MAAAA,UAAR;AAAoBC,MAAAA;AAApB,QAA2BH,KAAjC;AACA,UAAMI,MAAM,GAAGL,QAAQ,KAAKN,MAAM,CAACY,MAAP,GAAgB,CAA5C;AACA,UAAMC,MAAM,GAAGhB,SAAS,CAACiB,GAAV,CAAcN,IAAd,CAAf;AACA,QAAIO,QAAQ,GAAG,EAAf;;AAEA,QAAIF,MAAJ,EAAY;AACVZ,MAAAA,WAAW,GAAGN,UAAU,CAACa,IAAI,KAAK,eAAT,GAA2B,IAA3B,GAAkC,IAAnC,CAAxB;AACAN,MAAAA,UAAU,GAAI,OAAMQ,EAAG,EAAvB;AACAP,MAAAA,YAAY,CAACa,IAAb,CACExB,KAAK,CAACyB,aAAN,CACEtB,UAAU,CAACuB,EAAX,IAAiB,IADnB,EAEE;AAAEC,QAAAA,GAAG,EAAET;AAAP,OAFF,EAGEd,SAAS,CAACa,UAAU,CAACW,KAAZ,EAAmB,IAAnB,EAAyBV,EAAzB,CAHX,CADF;AAOD;;AAED,QAAIT,WAAW,KAAKU,MAAM,IAAI,CAACE,MAAhB,CAAf,EAAwC;AACtCE,MAAAA,QAAQ,CAACC,IAAT,CACExB,KAAK,CAACyB,aAAN,CACEhB,WADF,EAEE;AAAEkB,QAAAA,GAAG,EAAEjB;AAAP,OAFF,EAGE,GAAGC,YAHL,CADF;AAOAA,MAAAA,YAAY,GAAG,EAAf;AACAD,MAAAA,UAAU,GAAG,IAAb;AACAD,MAAAA,WAAW,GAAG,IAAd;AACD;;AAED,UAAMoB,aAAa,GAAIC,IAAD,IAAwC;AAC5DP,MAAAA,QAAQ,CAACC,IAAT,CACE,MAAC,OAAD;AAAS,QAAA,GAAG,EAAEN,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,IAAD;AAAM,QAAA,GAAG,EAAEA,EAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgBd,SAAS,CAACa,UAAU,CAACW,KAAZ,EAAmB,IAAnB,EAAyBV,EAAzB,CAAzB,CADF,CADF;AAKD,KAND;;AAQA,YAAQF,IAAR;AACE,WAAK,MAAL;AACA,WAAK,SAAL;AACEO,QAAAA,QAAQ,CAACC,IAAT,CAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAd;AACA;;AACF,WAAK,MAAL;AACE,YAAIP,UAAJ,EAAgB;AACdM,UAAAA,QAAQ,CAACC,IAAT,CAAcpB,SAAS,CAACa,UAAU,CAACW,KAAZ,EAAmB,KAAnB,EAA0BV,EAA1B,CAAvB;AACD;;AACD;;AACF,WAAK,OAAL;AACA,WAAK,OAAL;AAAc;AACZ,gBAAM;AAAEa,YAAAA,MAAM,GAAG,EAAX;AAAed,YAAAA,UAAU,EAAE;AAAEe,cAAAA;AAAF;AAA3B,cAA2CjB,KAAjD;AAEA,gBAAMkB,OAAO,GAAGjB,IAAI,KAAK,OAAzB;AACA,gBAAMkB,IAAI,GAAGD,OAAO,GAAG,KAAH,GAAW,OAA/B;AAEAV,UAAAA,QAAQ,CAACC,IAAT,CACE;AAAK,YAAA,SAAS,EAAC,iBAAf;AAAiC,YAAA,GAAG,EAAEN,EAAtC;AAA0C,YAAA,KAAK,EAAE;AAAEiB,cAAAA,aAAa,EAAGJ,MAAM,CAACK,kBAAP,GAA4B,GAA7B,GAAoC;AAArD,aAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,MAAC,IAAD;AACE,YAAA,GAAG,EAAG,uBAAsBC,kBAAkB,CAC5CN,MAAM,CAACO,cADqC,CAE5C,YAAWpB,EAAG,EAHlB;AAIE,YAAA,QAAQ,EAAE,CAACe,OAJb;AAKE,YAAA,GAAG,EAAED,OAAO,GAAGA,OAAO,CAACO,IAAR,CAAa,EAAb,CAAH,GAAsBC,SALpC;AAME,YAAA,IAAI,EAAE,CAACP,OANT;AAOE,YAAA,KAAK,EAAE,CAACA,OAPV;AAQE,YAAA,QAAQ,EAAE,CAACA,OARb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADF;AAcA;AACD;;AACD,WAAK,QAAL;AACEJ,QAAAA,aAAa,CAAC,IAAD,CAAb;AACA;;AACF,WAAK,YAAL;AACEA,QAAAA,aAAa,CAAC,IAAD,CAAb;AACA;;AACF,WAAK,gBAAL;AACEA,QAAAA,aAAa,CAAC,IAAD,CAAb;AACA;;AACF,WAAK,MAAL;AAAa;AACX,cAAIZ,UAAU,CAACW,KAAf,EAAsB;AACpB,kBAAMa,OAAO,GAAGxB,UAAU,CAACW,KAAX,CAAiB,CAAjB,EAAoB,CAApB,CAAhB;AACA,kBAAMc,QAAQ,GAAGzB,UAAU,CAACyB,QAAX,CAAoB,CAApB,EAAuB,CAAvB,CAAjB;;AAEA,gBAAIA,QAAQ,KAAK,YAAjB,EAA+B;AAC7B;AACAnB,cAAAA,QAAQ,CAACC,IAAT,CACE,MAAC,cAAD;AACE,gBAAA,GAAG,EAAEN,EADP;AAEE,gBAAA,GAAG,EAAEuB,OAFP;AAGE,gBAAA,UAAU,EAAEtC,UAHd;AAIE,gBAAA,cAAc,EAAE,KAJlB;AAKE,gBAAA,YAAY,EAAE,KALhB;AAME,gBAAA,oBAAoB,EAAE,IANxB;AAOE,gBAAA,eAAe,EAAE,CAAC,QAAD,EAAW,OAAX,CAPnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF;AAWD,aAbD,MAaO;AACLoB,cAAAA,QAAQ,CAACC,IAAT,CACE,MAAC,UAAD,CAAY,IAAZ;AAAiB,gBAAA,GAAG,EAAEN,EAAtB;AAA0B,gBAAA,QAAQ,EAAEwB,QAAQ,IAAI,EAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACGD,OADH,CADF;AAKD;AACF;;AACD;AACD;;AACD,WAAK,OAAL;AACE,YAAIxB,UAAU,CAACW,KAAf,EAAsB;AACpBL,UAAAA,QAAQ,CAACC,IAAT,CACExB,KAAK,CAACyB,aAAN,CACEtB,UAAU,CAACwC,UADb,EAEE;AAAEhB,YAAAA,GAAG,EAAET;AAAP,WAFF,EAGEd,SAAS,CAACa,UAAU,CAACW,KAAZ,EAAmB,KAAnB,EAA0BV,EAA1B,CAHX,CADF;AAOD;;AACD;;AACF;AACE,YACE,QACA,CAACb,SAAS,CAACiB,GAAV,CAAcN,IAAd,CAFH,EAGE;AACA4B,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4B7B,IAA5B;AACD;;AACD;AAxFJ;;AA0FA,WAAOO,QAAP;AACD,GAnIA,CADI,CAAP;AAsID","sourcesContent":["import React from 'react'\nimport ReactJSXParser from '@zeit/react-jsx-parser'\n\nimport Heading from './heading'\nimport components from './dynamic'\n\nimport { textBlock } from '../lib/notion/renderers'\n\nconst listTypes = new Set(['bulleted_list', 'numbered_list'])\n\nexport default function Content({ blocks }) {\n  let listTagName: string | null = null\n  let listLastId: string | null = null\n  let listChildren: React.ReactElement[] = []\n\n  return <div className=\"content\">\n    {blocks.map((block, blockIdx) => {\n      const { value } = block\n      const { type, properties, id } = value\n      const isLast = blockIdx === blocks.length - 1\n      const isList = listTypes.has(type)\n      let toRender = []\n\n      if (isList) {\n        listTagName = components[type === 'bulleted_list' ? 'ul' : 'ol']\n        listLastId = `list${id}`\n        listChildren.push(\n          React.createElement(\n            components.li || 'li',\n            { key: id } as any,\n            textBlock(properties.title, true, id)\n          )\n        )\n      }\n\n      if (listTagName && (isLast || !isList)) {\n        toRender.push(\n          React.createElement(\n            listTagName,\n            { key: listLastId! },\n            ...listChildren\n          )\n        )\n        listChildren = []\n        listLastId = null\n        listTagName = null\n      }\n\n      const renderHeading = (Type: string | React.ComponentType) => {\n        toRender.push(\n          <Heading key={id}>\n            <Type key={id}>{textBlock(properties.title, true, id)}</Type>\n          </Heading>\n        )\n      }\n\n      switch (type) {\n        case 'page':\n        case 'divider':\n          toRender.push(<hr />)\n          break\n        case 'text':\n          if (properties) {\n            toRender.push(textBlock(properties.title, false, id))\n          }\n          break\n        case 'image':\n        case 'video': {\n          const { format = {}, properties: { caption } } = value\n          \n          const isImage = type === 'image'\n          const Comp = isImage ? 'img' : 'video'\n\n          toRender.push(\n            <div className=\"media-container\" key={id} style={{ paddingBottom: (format.block_aspect_ratio * 100) + '%' }}>\n              <Comp\n                src={`/api/asset?assetUrl=${encodeURIComponent(\n                  format.display_source as any\n                )}&blockId=${id}`}\n                controls={!isImage}\n                alt={caption ? caption.join('') : undefined}\n                loop={!isImage}\n                muted={!isImage}\n                autoPlay={!isImage}\n              />\n            </div>\n          )\n          break\n        }\n        case 'header':\n          renderHeading('h1')\n          break\n        case 'sub_header':\n          renderHeading('h2')\n          break\n        case 'sub_sub_header':\n          renderHeading('h3')\n          break\n        case 'code': {\n          if (properties.title) {\n            const content = properties.title[0][0]\n            const language = properties.language[0][0]\n\n            if (language === 'LiveScript') {\n              // this requires the DOM for now\n              toRender.push(\n                <ReactJSXParser\n                  key={id}\n                  jsx={content}\n                  components={components}\n                  componentsOnly={false}\n                  renderInpost={false}\n                  allowUnknownElements={true}\n                  blacklistedTags={['script', 'style']}\n                />\n              )\n            } else {\n              toRender.push(\n                <components.Code key={id} language={language || ''}>\n                  {content}\n                </components.Code>\n              )\n            }\n          }\n          break\n        }\n        case 'quote':\n          if (properties.title) {\n            toRender.push(\n              React.createElement(\n                components.blockquote,\n                { key: id },\n                textBlock(properties.title, false, id)\n              )\n            )\n          }\n          break\n        default:\n          if (\n            process.env.NODE_ENV !== 'production' &&\n            !listTypes.has(type)\n          ) {\n            console.log('unknown type', type)\n          }\n          break\n      }\n      return toRender\n    })}\n  </div>\n}"]},"metadata":{},"sourceType":"module"}